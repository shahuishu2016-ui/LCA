{% extends "app/base.html" %}
{% load static %}

{% block style %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel='stylesheet' href="{% static 'app/css/stuInfo.css' %}">
{% endblock style %}
{% block content %}
 <!-- Main Container -->
    <div class="container">
        {% if message %}
            <p style='color:red'>{{message}}</p>
        {% endif %}
        <!-- Profile Header -->
        <div class="profile-header">
            <div class="profile-top">
                <div class="profile-photo">ğŸ‘¨â€ğŸ“</div>
                <div class="profile-info">
                    <h1 class="profile-name">{{student.name}}</h1>
                    <p class="profile-id">Student ID: {{student.id}}</p>
                    <div class="profile-badges">
                        <span class="badge">ğŸ {{student.game_type}}</span>
                        <span class="badge">â­ Active</span>
                        <span class="badge">ğŸ“… {{student.birthdate}}</span>
                        <form method="POST" style="display:inline;">
                            {% csrf_token %}
                            <button class="btn btn-primary" name="run_python" value="yes" class="action-btn">Refresh Data</button>
                        </form>
                        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#feeModal">
                            ğŸ’° Add Fee
                        </button>
                        {% if  paid %}
                            <span class="badge" style='background:green'>Paid</span>
                        {% else %}
                            <span class="badge" style='background:red;'>Unpaid</span>
                        {% endif %}
                    </div>
                    <!-- Fee Payment Modal -->
                    <div class="modal fade" id="feeModal" tabindex="-1" aria-labelledby="feeModalLabel" aria-hidden="true">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content fee-modal">
                        
                            <div class="modal-header">
                                <h5 class="modal-title" id="feeModalLabel">
                                    <span class="fee-icon">ğŸ’°</span>
                                    Add Fee Payment
                                </h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                            </div>

                            <form method="POST">
                                {% csrf_token %}
                                <div class="modal-body">
                                    <div class="form-group">
                                        <label class="form-label">
                                            <span class="label-icon">ğŸ“…</span>
                                            Payment Date
                                        </label>
                                        <input type="date" name="paid_on" class="form-control fee-input" 
                                                value="{{today_date}}" required>
                                    </div>

                                    <div class="form-group">
                                        <label class="form-label">
                                            <span class="label-icon">ğŸ’µ</span>
                                            Amount
                                        </label>
                                        <input type="number" name="amount" class="form-control fee-input" 
                                                placeholder="Enter amount" required>
                                    </div>
                                </div>

                                <div class="modal-footer">
                                    <button type="button" class="btn btn-cancel" data-bs-dismiss="modal">
                                        Cancel
                                    </button>
                                    <button type="submit" name="add_fee" value="yes" class="btn btn-save">
                                        <span class="btn-icon">âœ“</span>
                                        Save Payment
                                    </button>
                                </div>
                            </form>

                        </div>
                    </div>
                </div>

                </div>
            </div>
        </div>
        <!-- Content Grid -->
        <div class="content-grid">
            <div class="stats-card compact fancy">
                <h2 class="stats-title">Batting Stats</h2>

                <div class="compact-grid">
                    <div class="c-item"><span>ğŸ¯</span>{{student.total_matches}} <small>Matches</small></div>
                    <div class="c-item"><span>ğŸ’¯</span>{{student.total_runs}} <small>Runs</small></div>
                    <div class="c-item"><span>4ï¸âƒ£</span>{{student.fours}} <small>Fours</small></div>
                    <div class="c-item"><span>6ï¸âƒ£</span>{{student.sixes}} <small>Sixes</small></div>
                    <div class="c-item"><span>ğŸ“ˆ</span>{{student.average}} <small>Average</small></div>
                    <div class="c-item"><span>ğŸ†</span>{{student.top_score}} <small>High Score</small></div>
                    <div class="c-item"><span>âš¡</span>{{student.strike_rate}} <small>Strike Rate</small></div>
                </div>
            </div>

            <div class="stats-card compact fancy">
                <h2 class="stats-title">Bowling Stats</h2>

                <div class="compact-grid">
                    <div class="c-item"><span>ğŸ¯</span>{{student.total_matches}} <small>Matches</small></div>
                    <div class="c-item"><span>ğŸ”</span>{{student.overs}} <small>Overs</small></div>
                    <div class="c-item"><span>ğŸ”´</span>{{student.total_wickets}} <small>Wickets</small></div>
                    <div class="c-item"><span>ğŸ“‰</span>{{student.economy}} <small>Economy</small></div>
                </div>
            </div>

            <!-- Personal Information -->
            <div class="info-card">
                <div class="card-header">
                    <span class="card-icon">ğŸ“‹</span>
                    <h2 class="card-title">Personal Information</h2>
                </div>
                <div class="info-row">
                    <span class="info-label">Full Name:</span>
                    <span class="info-value">{{student.name}}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Age:</span>
                    <span class="info-value">{{student.age}}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Date of Birth:</span>
                    <span class="info-value">{{student.birthdate}}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Gender:</span>
                    <span class="info-value">{{student.gender}}</span>
                </div>
                {% comment %} <div class="info-row">
                    <span class="info-label">Blood Group:</span>
                    <span class="info-value">O+</span>
                </div> {% endcomment %}
            </div>

            <!-- Contact Information -->
            <div class="info-card">
                <div class="card-header">
                    <span class="card-icon">ğŸ“</span>
                    <h2 class="card-title">Contact Details</h2>
                </div>
                <div class="info-row">
                    <span class="info-label">Phone:</span>
                    <span class="info-value">+91 {{student.mobile}}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Email:</span>
                    <span class="info-value">{{student.email}}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Address:</span>
                    <span class="info-value">{{student.address}}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Emergency Contact:</span>
                    <span class="info-value">+91 {{student.mobile}}</span>
                </div>
                <div class="info-row">
                    <span class="info-label">Parent Name:</span>
                    <span class="info-value">{{student.parent_name}}</span>
                </div>
            </div>

            <!-- Performance Progress -->
            <div class="performance-card">
                <div class="card-header">
                    <span class="card-icon">ğŸ“ˆ</span>
                    <h2 class="card-title">Skill Development</h2>
                </div>
                <div class="progress-item">
                    <div class="progress-header">
                        <span class="progress-label">Batting Technique</span>
                        <span class="progress-value">85%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 85%;"></div>
                    </div>
                </div>
                <div class="progress-item">
                    <div class="progress-header">
                        <span class="progress-label">Fielding Skills</span>
                        <span class="progress-value">78%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 78%;"></div>
                    </div>
                </div>
                <div class="progress-item">
                    <div class="progress-header">
                        <span class="progress-label">Physical Fitness</span>
                        <span class="progress-value">92%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 92%;"></div>
                    </div>
                </div>
                <div class="progress-item">
                    <div class="progress-header">
                        <span class="progress-label">Game Strategy</span>
                        <span class="progress-value">70%</span>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: 70%;"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Action Buttons -->
        <div class="action-buttons">
            <button class="btn btn-primary">ğŸ“ Edit Profile</button>
            <button class="btn btn-secondary">ğŸ“„ Download Report</button>
            <button class="btn btn-secondary">ğŸ“… View Attendance</button>
            <a class="btn btn-secondary" href='{% url "students" %}'>â¬…ï¸ Back to Students</a>
        </div>
    </div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
{% endblock content %}